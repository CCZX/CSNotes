æœ€è¿‘åœ¨ä½¿ç”¨`React`é…åˆ`TypeScript`å¼€å‘çš„é¡¹ç›®å†™äº†ä¸€ä¸ª`isParentNode`æ–¹æ³•ï¼Œä½†æ˜¯é‡åˆ°äº†ä¸€äº›ç±»å‹ç›¸å…³çš„é”™è¯¯æç¤ºï¼Œä¸ºäº†ä¸€æ¢ç©¶ç«Ÿå°±æŸ¥é˜…èµ„æ–™äº†è§£äº†`Node`å’Œ`Element`çš„åŒºåˆ«ã€‚

## 1ã€`isParent`æ–¹æ³•



> æœ€åˆçš„`isParentNode`æ–¹æ³•å¦‚ä¸‹ï¼š

```TypeScript
const findParentNode = (target: HTMLElement, parentClassName: string): boolean => {
  let cur = target
  while (cur !== null && cur !== document) {
    if (cur.classList.contains(parentClassName)) {
      return true
    }
    cur = cur.parentNode
  }
  return false
}
```
ç”±äºè¿™æ®µä»£ç æ˜¯ç›´æ¥ä»æˆ‘ä¹‹å‰`JavaScript`çš„å·¥å…·å‡½æ•°ä¸­æ‹·è´è€Œæ¥ç„¶åæ‰‹åŠ¨åŠ ä¸Šç±»å‹æ³¨è§£ï¼Œæ‰€ä»¥æœ€å¼€å§‹æœ‰å¦‚ä¸‹ä¸¤ä¸ªæŠ¥é”™ï¼š

![](https://user-gold-cdn.xitu.io/2020/7/20/1736c8211bb3965f?w=679&h=177&f=png&s=27144)

![](https://user-gold-cdn.xitu.io/2020/7/20/1736c82998e0d6ba?w=760&h=307&f=png&s=36360)

é€šè¿‡æŠ¥é”™ä¿¡æ¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š
1. `HTMLElement`å’Œ`Document`æ²¡æœ‰ç±»å‹é‡å ï¼Œç±»å‹ä¸åŒä¸¤ä¸ªå€¼å°±ä¸å¯èƒ½ç›¸ç­‰ã€‚
2. `Node`ç±»å‹ä¸èƒ½åˆ†é…ç»™`HTMLElement`ã€‚

æ ¹æ®æŠ¥é”™ä¿¡æ¯å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼š

```ts
const findParentNode = (target: HTMLElement | null, parentClassName: string): boolean => {
  let cur = target
  while (cur !== null) {
    if (cur.classList.contains(parentClassName)) {
      return true
    }
    cur = cur.parentElement
  }
  return false
}
```
ä¿®æ”¹åä»£ç æ²¡æœ‰äº†æŠ¥é”™ğŸ‰ã€‚

å‡ºç°é”™è¯¯å°±æ˜¯å› ä¸º`Node`å’Œ`Element`ç±»å‹çš„åŸå› ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿï¼Œä¸‹é¢å°†æ¶‰åŠåˆ°`Element`ã€`HTMLElement`ã€`Node`ã€`Document`ç­‰çŸ¥è¯†ã€‚

## 2ã€`Node`ã€`Element`ã€`Document`

### Node

æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹`TypeScript`ä¸­å¯¹`Node`æ¥å£çš„å®šä¹‰ï¼š
```ts
interface Node extends EventTarget {
    readonly baseURI: string;
    readonly childNodes: NodeListOf<ChildNode>;
    // ...
    readonly parentElement: HTMLElement | null;
    readonly parentNode: Node & ParentNode | null;
    //...
    appendChild<T extends Node>(newChild: T): T;
    //...
}

interface EventTarget {
    addEventListener(type: string, listener: EventListenerOrEventListenerObject | null, options?: boolean | AddEventListenerOptions): void;
    dispatchEvent(event: Event): boolean;
    removeEventListener(type: string, callback: EventListenerOrEventListenerObject | null, options?: EventListenerOptions | boolean): void;
}
```

`Node`æ¥å£å®šä¹‰äº†å¸¸è§çš„å±æ€§å’Œæ–¹æ³•æ¯”å¦‚`parentElement` ã€`parentNode`ã€`appendChild`ç­‰ã€‚

### Element

Element æ˜¯ä¸€ä¸ªé€šç”¨æ€§éå¸¸å¼ºçš„åŸºç±»ï¼Œæ‰€æœ‰Documentå¯¹è±¡ä¸‹çš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ªå®ƒã€‚è¿™ä¸ªæ¥å£æè¿°äº†æ‰€æœ‰ç›¸åŒç§ç±»çš„å…ƒç´ æ‰€æ™®éå…·æœ‰çš„æ–¹æ³•å’Œå±æ€§ã€‚ä¸€äº›æ¥å£ç»§æ‰¿è‡ªElementå¹¶ä¸”å¢åŠ äº†ä¸€äº›é¢å¤–åŠŸèƒ½çš„æ¥å£æè¿°äº†å…·ä½“çš„è¡Œä¸ºã€‚

`TypeScript`ä¸­å¯¹`Element`æ¥å£çš„å®šä¹‰ï¼š
```ts
interface Element extends Node, ParentNode, NonDocumentTypeChildNode, ChildNode, Slotable, Animatable {
    readonly attributes: NamedNodeMap;
    readonly classList: DOMTokenList;
}
```
æ›´å¤šå±æ€§å¯ä»¥æŸ¥çœ‹MDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/API/Element
`Element`ä¸­å®šä¹‰äº†



## 2ã€`Element`å’Œ`HTMLElement`

`HTMLElement`æ¥å£è¡¨ç¤ºæ‰€æœ‰çš„`HTML`å…ƒç´ ã€‚

åœ¨`Typescript`çš„`lib.dom.d.ts`æ–‡ä»¶ä¸­å®šä¹‰å¦‚ä¸‹ï¼š
```ts
interface HTMLElement extends Element, GlobalEventHandlers, DocumentAndElementEventHandlers, ElementContentEditable, HTMLOrSVGElement, ElementCSSInlineStyle {
    accessKey: string;
    readonly accessKeyLabel: string;
    autocapitalize: string;
    dir: string;
    draggable: boolean;
    hidden: boolean;
    innerText: string;
    lang: string;
    readonly offsetHeight: number;
    readonly offsetLeft: number;
    readonly offsetParent: Element | null;
    readonly offsetTop: number;
    readonly offsetWidth: number;
    spellcheck: boolean;
    title: string;
    translate: boolean;
    click(): void;
    addEventListener<K extends keyof HTMLElementEventMap>(type: K, listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;
    addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions): void;
    removeEventListener<K extends keyof HTMLElementEventMap>(type: K, listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => any, options?: boolean | EventListenerOptions): void;
    removeEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions): void;
}
```
å¯è§`HTMLElement`ç»§æ‰¿äº†`ELement`æ¥å£ä»¥åŠå…¶ä»–çš„æ–¹æ³•æ¥å£ã€‚

æ‰€ä»¥`Element`æ˜¯`HTMLElement`çš„çˆ¶æ¥å£ã€‚

