# 使用Chrome调试性能

## 加载时

### 1、导致加载慢的原因
#### 1.1、HTTP请求过多
`HTTP`请求在连接的过程中会经历`DNS`查询、三次握手、服务器处理发送响应、四次挥手等，所以发送过多的`HTTP`请求会导致性能慢。

**使用`Chrome`查看请求的过程：**
![](./static/HTTP请求过程.png)
**逐个分析参数：**

1. `Queueing`：在队列中排队的时间，如果遇见优先级高的、`TCP`连接达到上限等情况
2. `Stalled`：从`TCP`连接完成到真正能够发送数据的时间
3. `DNS`：`DNS`查找使用的时间
4. `Initial Connection`：建立连接使用的时间，包括三次握手🤝等
5. `SSL`：完成`SSL`握手🤝使用的时间
6. `Request sent`：发出网络请求所使用的时间
7. `Waiting`（`TTFB：Time To First Byte`）：页面从发出请求到收到响应消息第一个字节之间的时间，包含了`DNS`、`TCP`等时间。
8. `Content Download`：接收响应所使用的时间。

所以当请求过多的时候在`HTTP`连接的过程中会花费一定的时间，所以可以将一些小的文件合并成一个较大的文件📃，减少`HTTP`请求（但是大的文件`Content Download`时间就会相应的变长，所以如果是首页加载还是建议拆分文件，让用户尽快的看见首页内容）。

**使用HTTP2.0**

1. 多路复用，`HTTP1.1`处理多个请求需要建立多个`TCP`连接，`2.0`可以给请求用**流`ID`**作为唯一标识可以多个请求复用一个`TCP`连接。
2. 首部压缩，`HTTP2.0`在客户端和服务端使用“首部表”来跟踪存储之前`HTTP`请求的首部字段，并用键值对的方式存储起来；对于后续相同的首部字段直接使用首部表存储的就可以了。

| 索引 | 首部名称 | 值   |
| ---- | -------- | ---- |
| 62   | Header1  | foo  |
| 63   | Header2  | But  |
| 64   | Header3  | Bar  |

使用：`62 63 64`


## 运行时
